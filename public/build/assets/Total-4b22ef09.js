import{q as h,r as u,y as x,j as o,a,F as m,d as _,u as S}from"./app-a3d8acba.js";import{P as $}from"./ProductTizer-075dec23.js";import{P as y}from"./Paginate-45f2a210.js";import{S as k}from"./react-select.esm-6cfb0819.js";const v=({item:e,filter:l,setFilter:r})=>{const[d,n]=u.useState(l[e.accounting_id]&&l[e.accounting_id].length);return o("li",{className:"filter-sidebar__item",children:[a("div",{className:"filter-sidebar__item-title fw-600-16-19 cursor-pointer py-[9px] -mt-[9px] mb-0 px-[21px] -mx-[21px]",onClick:i=>n(t=>!t),children:e.title}),d?a("ul",{className:"checkbox-grid max-h-[24rem] overflow-y-auto p-2",children:e.values.map((i,t)=>a("li",{children:o("label",{htmlFor:`specification-${e.id}-${t}`,className:"checkbox-grid__item",children:[a("div",{className:"checkbox-wrapper center",children:a("input",{type:"checkbox",name:`specification-${e.id}`,id:`specification-${e.id}-${t}`,defaultChecked:l[e.accounting_id]&&l[e.accounting_id].indexOf(i)>-1,onChange:f=>{r(p=>{const c={...p};c[e.accounting_id]=c[e.accounting_id]?c[e.accounting_id]:[];const g=c[e.accounting_id].indexOf(i);return g>-1?c[e.accounting_id].splice(g,1):c[e.accounting_id].push(i),c[e.accounting_id].length||delete c[e.accounting_id],c})}})}),a("div",{className:"checkbox-label-wrapper center",children:a("div",{className:"checkbox-label",children:i})})]})},`${e.id}-${t}`))}):""]})},C=e=>{const{specifications:l,options:r,ziggy:d,category:n=null}=h().props,[i,t]=u.useState(h().props.filter),f=u.useRef(!1),p=u.useRef(0);u.useEffect(()=>{if(f.current){clearTimeout(p.current);let s="?";for(let N in i)s+="&"+N+"="+i[N].join(":::");p.current=setTimeout(()=>{x.visit(n.data.url+s,{preserveScroll:!0,preserveState:!0})},2e3)}f.current=!0},[i]);const c=s=>{clearTimeout(p.current)},[g,w]=u.useState(!1);return u.useEffect(()=>(l.data.map(s=>{s.values.length&&w(!0)}),document.addEventListener("inertia:start",c),()=>{clearTimeout(p.current),document.removeEventListener("inertia:start",c)}),[]),g?o("ul",{className:"filter-sidebar catalogue__filter-sidebar fw-400-16-19",children:[a("li",{className:"filter-sidebar__title center",children:"Фильтр"}),o("ul",{className:"filter-sidebar__inner",children:[l.data.map(s=>a(u.Fragment,{children:s.values.length?a(v,{item:s,filter:i,setFilter:t}):""},s.id)),r.data.map(s=>a(u.Fragment,{children:s.values.length?a(v,{item:s,filter:i,setFilter:t}):""},s.id))]})]}):a(m,{})},P=()=>{const{products:e,parent:l=null,category:r=null,categories:d=null,siblings:n=null,parentsiblings:i=null}=h().props;return o("div",{className:"catalogue catalogue-section__catalogue",children:[o("div",{className:"catalogue__left",children:[r?a(C,{}):"",d&&d.data.length?a("ul",{className:"total-found-sidebar catalogue__total-found-sidebar fw-400-16-19",children:d.data.map(t=>a("li",{className:"total-found-sidebar__catalogue-sidebar-item",children:o(_,{href:t.url,className:`catalogue-sidebar-item ${r&&r.data.id===t.id?"underline purple":"text-black"}`,children:[a("div",{className:"catalogue-sidebar-item__title fw-600-16-1",children:t.name}),a("div",{className:"catalogue-sidebar-item__total",children:t.productsCount?`(${t.productsCount})`:""})]})},t.id))}):a(m,{}),n&&n.data.length?a("ul",{className:"total-found-sidebar catalogue__total-found-sidebar fw-400-16-19",children:n.data.map(t=>a("li",{className:"total-found-sidebar__catalogue-sidebar-item",children:o(_,{href:t.url,className:`catalogue-sidebar-item ${r&&r.data.id===t.id?"underline purple":"text-black"}`,children:[a("div",{className:"catalogue-sidebar-item__title fw-600-16-1",children:t.name}),a("div",{className:"catalogue-sidebar-item__total",children:t.productsCount?`(${t.productsCount})`:""})]})},t.id))}):a(m,{}),i&&i.data.length?a("ul",{className:"total-found-sidebar catalogue__total-found-sidebar fw-400-16-19",children:i.data.map(t=>a("li",{className:"total-found-sidebar__catalogue-sidebar-item",children:o(_,{href:t.url,className:`catalogue-sidebar-item ${l&&l.data.id===t.id?"underline purple":"text-black"}`,children:[a("div",{className:"catalogue-sidebar-item__title fw-600-16-1",children:t.name}),a("div",{className:"catalogue-sidebar-item__total",children:t.productsCount?`(${t.productsCount})`:""})]})},t.id))}):a(m,{})]}),o("div",{className:"catalogue__grid",children:[a("ul",{className:"catalogue__grid-inner",children:e.data.map(t=>a("li",{className:"catalogue__item",children:a($,{item:t})},t.id))}),a(y,{...e.meta})]})]})},R={control:(e,l)=>({...e,borderColor:"rgba(0,0,0,.2) !important",borderRadius:"9999px",minHeight:"40px",boxShadow:"none !important"}),indicatorSeparator:(e,l)=>({...e,display:"none"}),singleValue:(e,l)=>({...e,color:"#414D55",padding:"0 4px"}),menu:(e,l)=>({...e,minWidth:"12rem",left:"auto",right:0})},b=[{value:"viewed:desc",label:"Популярные"},{value:"min_price:asc",label:"Дешевле"},{value:"min_price:desc",label:"Дороже"}],j=()=>{const{sort:e,order:l}=h().props;return a(k,{options:b,styles:R,isSearchable:!1,placeholder:"Сортировка",value:e&&l?b.find(r=>r.value==`${e}:${l}`):b[0],onChange:r=>{let d=new URL(window.location),n=new URLSearchParams(d.search);n.set("order",r.value.split(":")[1]),n.set("sort",r.value.split(":")[0]),x.visit(d.pathname+"?"+n.toString())},theme:r=>({...r,colors:{...r.colors,primary25:"#f1f5f8",primary:"#3A9EAA"}})})},z=()=>{const{products:e}=h().props,{numWord:l}=S();return a("div",{className:"total-found-label fw-400-16-19",children:o("span",{children:["Показано ",e.meta.total," ",l(e.meta.total,["товар","товара","товаров"])]})})};export{P as M,j as S,z as T};
