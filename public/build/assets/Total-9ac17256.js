import{q as g,r as u,y as w,j as d,a,F as _,d as b,u as $}from"./app-77139a2c.js";import{P as S}from"./ProductTizer-c88fac02.js";import{P as y}from"./Paginate-57174a0c.js";import{S as k}from"./react-select.esm-0ff51ffb.js";const x=({item:e,filter:l,setFilter:r,nna:s="specification"})=>{const[c,n]=u.useState(l[e.accounting_id]&&l[e.accounting_id].length);return d("li",{className:"filter-sidebar__item",children:[a("div",{className:"filter-sidebar__item-title fw-600-16-19 cursor-pointer py-[9px] -mt-[9px] mb-0 px-[21px] -mx-[21px]",onClick:t=>n(p=>!p),children:e.title}),c?a("ul",{className:"checkbox-grid max-h-[24rem] overflow-y-auto p-2",children:e.values.map((t,p)=>a("li",{children:d("label",{htmlFor:`${s}-${e.id}-${p}`,className:"checkbox-grid__item",children:[a("div",{className:"checkbox-wrapper center",children:a("input",{type:"checkbox",name:`${s}-${e.id}`,id:`${s}-${e.id}-${p}`,defaultChecked:l[e.accounting_id]&&l[e.accounting_id].indexOf(t)>-1,onChange:h=>{r(m=>{const o={...m};o[e.accounting_id]=o[e.accounting_id]?o[e.accounting_id]:[];const f=o[e.accounting_id].indexOf(t);return f>-1?o[e.accounting_id].splice(f,1):o[e.accounting_id].push(t),o[e.accounting_id].length||delete o[e.accounting_id],o})}})}),a("div",{className:"checkbox-label-wrapper center",children:a("div",{className:"checkbox-label",children:t})})]})},`${e.id}-${p}`))}):""]})},C=e=>{const{specifications:l,options:r,ziggy:s,category:c=null}=g().props,[n,t]=u.useState(g().props.filter),p=u.useRef(!1),h=u.useRef(0);u.useEffect(()=>{if(p.current){clearTimeout(h.current);let i="?";for(let v in n)i+="&"+v+"="+n[v].join(":::");h.current=setTimeout(()=>{w.visit(c.data.url+i,{preserveScroll:!0,preserveState:!0})},2e3)}p.current=!0},[n]);const m=i=>{clearTimeout(h.current)},[o,f]=u.useState(!1);return u.useEffect(()=>(l.data.map(i=>{i.values.length&&f(!0)}),document.addEventListener("inertia:start",m),()=>{clearTimeout(h.current),document.removeEventListener("inertia:start",m)}),[]),o?d("ul",{className:"filter-sidebar catalogue__filter-sidebar fw-400-16-19",children:[a("li",{className:"filter-sidebar__title center",children:"Фильтр"}),d("ul",{className:"filter-sidebar__inner",children:[l.data.map(i=>a(u.Fragment,{children:i.values.length?a(x,{item:i,filter:n,setFilter:t}):""},i.id)),r.data.map(i=>a(u.Fragment,{children:i.values.length?a(x,{item:i,filter:n,setFilter:t,nna:"options"}):""},i.id))]})]}):a(_,{})},P=()=>{const{products:e,parent:l=null,category:r=null,categories:s=null,siblings:c=null,parentsiblings:n=null}=g().props;return d("div",{className:"catalogue catalogue-section__catalogue",children:[d("div",{className:"catalogue__left",children:[r?a(C,{}):"",s&&s.data.length?a("ul",{className:"total-found-sidebar catalogue__total-found-sidebar fw-400-16-19",children:s.data.map(t=>a("li",{className:"total-found-sidebar__catalogue-sidebar-item",children:d(b,{href:t.url,className:`catalogue-sidebar-item ${r&&r.data.id===t.id?"underline purple":"text-black"}`,children:[a("div",{className:"catalogue-sidebar-item__title fw-600-16-1",children:t.name}),a("div",{className:"catalogue-sidebar-item__total",children:t.productsCount?`(${t.productsCount})`:""})]})},t.id))}):a(_,{}),c&&c.data.length?a("ul",{className:"total-found-sidebar catalogue__total-found-sidebar fw-400-16-19",children:c.data.map(t=>a("li",{className:"total-found-sidebar__catalogue-sidebar-item",children:d(b,{href:t.url,className:`catalogue-sidebar-item ${r&&r.data.id===t.id?"underline purple":"text-black"}`,children:[a("div",{className:"catalogue-sidebar-item__title fw-600-16-1",children:t.name}),a("div",{className:"catalogue-sidebar-item__total",children:t.productsCount?`(${t.productsCount})`:""})]})},t.id))}):a(_,{}),n&&n.data.length?a("ul",{className:"total-found-sidebar catalogue__total-found-sidebar fw-400-16-19",children:n.data.map(t=>a("li",{className:"total-found-sidebar__catalogue-sidebar-item",children:d(b,{href:t.url,className:`catalogue-sidebar-item ${l&&l.data.id===t.id?"underline purple":"text-black"}`,children:[a("div",{className:"catalogue-sidebar-item__title fw-600-16-1",children:t.name}),a("div",{className:"catalogue-sidebar-item__total",children:t.productsCount?`(${t.productsCount})`:""})]})},t.id))}):a(_,{})]}),d("div",{className:"catalogue__grid",children:[a("ul",{className:"catalogue__grid-inner",children:e.data.map(t=>a("li",{className:"catalogue__item",children:a(S,{item:t})},t.id))}),a(y,{...e.meta})]})]})},R={control:(e,l)=>({...e,borderColor:"rgba(0,0,0,.2) !important",borderRadius:"9999px",minHeight:"40px",boxShadow:"none !important"}),indicatorSeparator:(e,l)=>({...e,display:"none"}),singleValue:(e,l)=>({...e,color:"#414D55",padding:"0 4px"}),menu:(e,l)=>({...e,minWidth:"12rem",left:"auto",right:0})},N=[{value:"viewed:desc",label:"Популярные"},{value:"min_price:asc",label:"Дешевле"},{value:"min_price:desc",label:"Дороже"}],j=()=>{const{sort:e,order:l}=g().props;return a(k,{options:N,styles:R,isSearchable:!1,placeholder:"Сортировка",value:e&&l?N.find(r=>r.value==`${e}:${l}`):N[0],onChange:r=>{let s=new URL(window.location),c=new URLSearchParams(s.search);c.set("order",r.value.split(":")[1]),c.set("sort",r.value.split(":")[0]),w.visit(s.pathname+"?"+c.toString())},theme:r=>({...r,colors:{...r.colors,primary25:"#f1f5f8",primary:"#3A9EAA"}})})},z=()=>{const{products:e}=g().props,{numWord:l}=$();return a("div",{className:"total-found-label fw-400-16-19",children:d("span",{children:["Показано ",e.meta.total," ",l(e.meta.total,["товар","товара","товаров"])]})})};export{P as M,j as S,z as T};
