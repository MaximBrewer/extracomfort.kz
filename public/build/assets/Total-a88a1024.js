import{q as g,r as o,y as x,j as n,a,F as f,d as _,u as w}from"./app-b2042890.js";import{P as S}from"./ProductTizer-be3c3068.js";import{P as y}from"./Paginate-d0fad5e4.js";import"./index-bd5fc55c.js";import{S as k}from"./react-select.esm-fdbf8bee.js";const v=({item:e,filter:l,setFilter:r})=>{const[u,d]=o.useState(l[e.accounting_id]&&l[e.accounting_id].length);return n("li",{className:"filter-sidebar__item",children:[a("div",{className:"filter-sidebar__item-title fw-600-16-19 cursor-pointer py-[9px] -mt-[9px] mb-0 px-[21px] -mx-[21px]",onClick:i=>d(t=>!t),children:e.title}),u?a("ul",{className:"checkbox-grid max-h-[24rem] overflow-y-auto p-2",children:e.values.map((i,t)=>a("li",{children:n("label",{htmlFor:`specification-${e.id}-${t}`,className:"checkbox-grid__item",children:[a("div",{className:"checkbox-wrapper center",children:a("input",{type:"checkbox",name:`specification-${e.id}`,id:`specification-${e.id}-${t}`,defaultChecked:l[e.accounting_id]&&l[e.accounting_id].indexOf(i)>-1,onChange:m=>{r(p=>{const s={...p};s[e.accounting_id]=s[e.accounting_id]?s[e.accounting_id]:[];const h=s[e.accounting_id].indexOf(i);return h>-1?s[e.accounting_id].splice(h,1):s[e.accounting_id].push(i),s[e.accounting_id].length||delete s[e.accounting_id],s})}})}),a("div",{className:"checkbox-label-wrapper center",children:a("div",{className:"checkbox-label",children:i})})]})},`${e.id}-${t}`))}):""]})},C=e=>{const{specifications:l,options:r,ziggy:u,category:d=null}=g().props,[i,t]=o.useState(g().props.filter),m=o.useRef(!1),p=o.useRef(0);o.useEffect(()=>{if(m.current){clearTimeout(p.current);let c="?";for(let N in i)c+="&"+N+"="+i[N].join(":::");p.current=setTimeout(()=>{x.visit(d.data.url+c,{preserveScroll:!0,preserveState:!0})},2e3)}m.current=!0},[i]);const s=c=>{clearTimeout(p.current)},[h,$]=o.useState(!1);return o.useEffect(()=>(l.data.map(c=>{c.values.length&&$(!0)}),document.addEventListener("inertia:start",s),()=>{clearTimeout(p.current),document.removeEventListener("inertia:start",s)}),[]),h?n("ul",{className:"filter-sidebar catalogue__filter-sidebar fw-400-16-19",children:[a("li",{className:"filter-sidebar__title center",children:"Фильтр"}),n("ul",{className:"filter-sidebar__inner",children:[l.data.map(c=>a(o.Fragment,{children:c.values.length?a(v,{item:c,filter:i,setFilter:t}):""},c.id)),r.data.map(c=>a(o.Fragment,{children:c.values.length?a(v,{item:c,filter:i,setFilter:t}):""},c.id))]})]}):a(f,{})},O=()=>{const{products:e,parent:l=null,category:r=null,categories:u=null,siblings:d=null,parentsiblings:i=null}=g().props;return n("div",{className:"catalogue catalogue-section__catalogue",children:[n("div",{className:"catalogue__left",children:[u&&u.data.length?a("ul",{className:"total-found-sidebar catalogue__total-found-sidebar fw-400-16-19",children:u.data.map(t=>a("li",{className:"total-found-sidebar__catalogue-sidebar-item",children:n(_,{href:t.url,className:`catalogue-sidebar-item ${r&&r.data.id===t.id?"underline purple":"text-black"}`,children:[a("div",{className:"catalogue-sidebar-item__title fw-600-16-1",children:t.name}),a("div",{className:"catalogue-sidebar-item__total",children:t.productsCount?`(${t.productsCount})`:""})]})},t.id))}):a(f,{}),d&&d.data.length?a("ul",{className:"total-found-sidebar catalogue__total-found-sidebar fw-400-16-19",children:d.data.map(t=>a("li",{className:"total-found-sidebar__catalogue-sidebar-item",children:n(_,{href:t.url,className:`catalogue-sidebar-item ${r&&r.data.id===t.id?"underline purple":"text-black"}`,children:[a("div",{className:"catalogue-sidebar-item__title fw-600-16-1",children:t.name}),a("div",{className:"catalogue-sidebar-item__total",children:t.productsCount?`(${t.productsCount})`:""})]})},t.id))}):a(f,{}),i&&i.data.length?a("ul",{className:"total-found-sidebar catalogue__total-found-sidebar fw-400-16-19",children:i.data.map(t=>a("li",{className:"total-found-sidebar__catalogue-sidebar-item",children:n(_,{href:t.url,className:`catalogue-sidebar-item ${l&&l.data.id===t.id?"underline purple":"text-black"}`,children:[a("div",{className:"catalogue-sidebar-item__title fw-600-16-1",children:t.name}),a("div",{className:"catalogue-sidebar-item__total",children:t.productsCount?`(${t.productsCount})`:""})]})},t.id))}):a(f,{}),r?a(C,{}):""]}),n("div",{className:"catalogue__grid",children:[a("ul",{className:"catalogue__grid-inner",children:e.data.map(t=>a("li",{className:"catalogue__item",children:a(S,{item:t})},t.id))}),a(y,{...e.meta})]})]})},T={control:(e,l)=>({...e,borderColor:"rgba(0,0,0,.2) !important",borderRadius:"9999px",minHeight:"40px",boxShadow:"none !important"}),indicatorSeparator:(e,l)=>({...e,display:"none"}),singleValue:(e,l)=>({...e,color:"#414D55",padding:"0 4px"}),menu:(e,l)=>({...e,minWidth:"12rem",left:"auto",right:0})},b=[{value:"title:asc",label:"По названию А-Я"},{value:"title:desc",label:"По названию Я-А"},{value:"min_price:asc",label:"Дешевле"},{value:"min_price:desc",label:"Дороже"}],P=()=>{const{sort:e,order:l}=g().props;return a(k,{options:b,styles:T,isSearchable:!1,placeholder:"Сортировка",value:e&&l?b.find(r=>r.value==`${e}:${l}`):b[0],onChange:r=>x.visit(route("catalog",{sort:r.value.split(":")[0],order:r.value.split(":")[1]})),theme:r=>({...r,colors:{...r.colors,primary25:"#f1f5f8",primary:"#3A9EAA"}})})},A=()=>{const{products:e}=g().props,{numWord:l}=w();return a("div",{className:"total-found-label fw-400-16-19",children:n("span",{children:["Показано ",e.meta.total," ",l(e.meta.total,["товар","товара","товаров"])]})})};export{O as M,P as S,A as T};
