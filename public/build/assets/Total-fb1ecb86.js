import{q as b,r as u,y,j as n,a as e,F as m,d as h,u as S}from"./app-d44ec442.js";import{P as k}from"./ProductTizer-92c15691.js";import{P as C}from"./Paginate-cafc79fd.js";import{S as T}from"./react-select.esm-ade89927.js";const x=({item:a,filter:l,setFilter:s})=>{const[p,d]=u.useState(!1);return n("li",{className:"filter-sidebar__item",children:[e("div",{className:"filter-sidebar__item-title fw-600-16-19 cursor-pointer py-[9px] -mt-[9px] mb-0 px-[21px] -mx-[21px]",onClick:c=>d(i=>!i),children:a.title}),p?e("ul",{className:"checkbox-grid max-h-[24rem] overflow-y-auto p-2",children:a.values.map((c,i)=>e("li",{children:n("label",{htmlFor:`specification-${a.id}-${i}`,className:"checkbox-grid__item",children:[e("div",{className:"checkbox-wrapper center",children:e("input",{type:"checkbox",name:`specification-${a.id}`,id:`specification-${a.id}-${i}`,defaultChecked:l[a.accounting_id].indexOf(c)>-1,onChange:t=>{s(f=>{const o={...f};o[a.accounting_id]=o[a.accounting_id]?o[a.accounting_id]:[];const g=o[a.accounting_id].indexOf(c);return g>-1?o[a.accounting_id].splice(g,1):o[a.accounting_id].push(c),o[a.accounting_id].length||delete o[a.accounting_id],o})}})}),e("div",{className:"checkbox-label-wrapper center",children:e("div",{className:"checkbox-label",children:c})})]})},`${a.id}-${i}`))}):""]})},F=a=>{const{specifications:l,options:s,ziggy:p,category:d=null,subcategory:c=null,subsubcategory:i=null}=b().props,[t,f]=u.useState({}),o=u.useRef(!1),g=u.useRef(0);u.useEffect(()=>{if(o.current){clearTimeout(g.current);let r={};for(let N in t)r[N]=t[N].join(":::");g.current=setTimeout(()=>{d?y.visit(route("category",i?{...r,category:d.data.slug,subcategory:c.data.slug,subsubcategory:i.data.slug}:c?{...r,category:d.data.slug,subcategory:c.data.slug}:{...r,category:d.data.slug}),{preserveState:!0,preserveScroll:!0}):y.visit(route("catalog",r))},2e3)}o.current=!0},[t]);const v=r=>{clearTimeout(g.current)},[w,$]=u.useState(!1);return u.useEffect(()=>(l.data.map(r=>{r.values.length&&$(!0)}),document.addEventListener("inertia:start",v),()=>{clearTimeout(g.current),document.removeEventListener("inertia:start",v)}),[]),w?n("ul",{className:"filter-sidebar catalogue__filter-sidebar fw-400-16-19",children:[e("li",{className:"filter-sidebar__title center",children:"Фильтр"}),n("ul",{className:"filter-sidebar__inner",children:[l.data.map(r=>e(u.Fragment,{children:r.values.length?e(x,{item:r,filter:t,setFilter:f}):""},r.id)),s.data.map(r=>e(u.Fragment,{children:r.values.length?e(x,{item:r,filter:t,setFilter:f}):""},r.id))]})]}):e(m,{})},P=()=>{const{products:a,category:l=null,subcategory:s=null,subsubcategory:p=null,categories:d=null,subcategories:c=null,subsubcategories:i=null}=b().props;return n("div",{className:"catalogue catalogue-section__catalogue",children:[n("div",{className:"catalogue__left",children:[d&&d.data.length?e("ul",{className:"total-found-sidebar catalogue__total-found-sidebar fw-400-16-19",children:d.data.map(t=>e("li",{className:"total-found-sidebar__catalogue-sidebar-item",children:n(h,{href:route("category",{category:t.slug}),className:"catalogue-sidebar-item",children:[e("div",{className:"catalogue-sidebar-item__title fw-600-16-1  text-black",children:t.name}),e("div",{className:"catalogue-sidebar-item__total",children:t.productsCount?`(${t.productsCount})`:""})]})},t.id))}):e(m,{}),c&&c.data.length?e("ul",{className:"total-found-sidebar catalogue__total-found-sidebar fw-400-16-19",children:c.data.map(t=>e("li",{className:"total-found-sidebar__catalogue-sidebar-item",children:n(h,{href:route("category",{category:l.data.slug,subcategory:t.slug}),className:`catalogue-sidebar-item ${s&&s.data.id===t.id?"underline purple":"text-black"}`,children:[e("div",{className:"catalogue-sidebar-item__title fw-600-16-19",children:t.name}),e("div",{className:"catalogue-sidebar-item__total",children:t.productsCount?`(${t.productsCount})`:""})]})},t.id))}):e(m,{}),i&&i.data.length?e("ul",{className:"total-found-sidebar catalogue__total-found-sidebar fw-400-16-19",children:i.data.map(t=>e("li",{className:"total-found-sidebar__catalogue-sidebar-item",children:n(h,{href:route("category",{category:l.data.slug,subcategory:s.data.slug,subsubcategory:t.slug}),className:`catalogue-sidebar-item ${p&&p.data.id===t.id?"underline purple":"text-black"}`,children:[e("div",{className:"catalogue-sidebar-item__title fw-600-16-19",children:t.name}),e("div",{className:"catalogue-sidebar-item__total",children:t.productsCount?`(${t.productsCount})`:""})]})},t.id))}):e(m,{}),l?e(F,{}):""]}),n("div",{className:"catalogue__grid",children:[e("ul",{className:"catalogue__grid-inner",children:a.data.map(t=>e("li",{className:"catalogue__item",children:e(k,{item:t})},t.id))}),e(C,{...a.meta})]})]})},E={control:(a,l)=>({...a,borderColor:"rgba(0,0,0,.2) !important",borderRadius:"9999px",minHeight:"40px",boxShadow:"none !important"}),indicatorSeparator:(a,l)=>({...a,display:"none"}),singleValue:(a,l)=>({...a,color:"#414D55",padding:"0 4px"}),menu:(a,l)=>({...a,minWidth:"12rem",left:"auto",right:0})},_=[{value:"title:asc",label:"По названию А-Я"},{value:"title:desc",label:"По названию Я-А"},{value:"min_price:asc",label:"Дешевле"},{value:"min_price:desc",label:"Дороже"}],A=()=>{const{sort:a,order:l}=b().props;return e(T,{options:_,styles:E,isSearchable:!1,placeholder:"Сортировка",value:a&&l?_.find(s=>s.value==`${a}:${l}`):_[0],onChange:s=>y.visit(route("catalog",{sort:s.value.split(":")[0],order:s.value.split(":")[1]})),theme:s=>({...s,colors:{...s.colors,primary25:"#f1f5f8",primary:"#3A9EAA"}})})},I=()=>{const{products:a}=b().props,{numWord:l}=S();return e("div",{className:"total-found-label fw-400-16-19",children:n("span",{children:["Показано ",a.meta.total," ",l(a.meta.total,["товар","товара","товаров"])]})})};export{P as M,A as S,I as T};
